# otus-cpp-prof-4

## Изучение шаблонов (use SFINAE)

Практическая работа по использованию паттерна SFINAE.

`print_ip( int8_t{-1} ); // 255`

`print_ip( int16_t{0} ); // 0.0`

`print_ip( int32_t{2130706433} ); // 127.0.0.1`

`print_ip( int64_t{8875824491850138409} );// 123.45.67.89.101.112.131.41`

`print_ip( std::string{“Hello, World!”} ); // Hello, World!`

`print_ip( std::vector<int>{100, 200, 300, 400} ); // 100.200.300.400`

`print_ip( std::list<shot>{400, 300, 200, 100} ); // 400.300.200.100`

## Motivation

При реализации шаблонных функций/структрур возникают трудности с типами передаваемых аргументов. Например, у контейнера vector метод sort отсутствует, а у list он есть, но list можно отсортировать алгоритмом std::sort итд. Поэтому для того, чтобы динамически определять тип передаваемого аргумента, и соответственно отсекать неподходящие перегрузки шаблонов используют SFINAE.

## Пример работы

Посмотрим пример использования SFINAE.

Проверка типа аргумента осуществляется в **compile time**, как и формирование тела шаблона

`template <typename T>
inline typename std::enable_if<std::is_same<T, std::string>::value, void>::type
ip_filter(const T &_ip)`

где

`inline typename std::enable_if<std::is_same<T, std::string>::value, void>::type`

просто тип возвращаемой функции;

`std::is_same<T, std::string>::value`

Возвращает булевское значение. Если T == std::string, то true, иначе false. Булевской значение храниться в поле **value** структуры **std::is_same**, а тип в **type**

`std::enable_if<..., void>::type`

если первый аргумент будет false, то происходит ошибка компиляции и компилятор ищет другое соответствие с шаблоном, если true, то возвращет тип второго аргумента, то есть **void**.

## Последовательность действий для запуска проекта:

1. Скачать проект с форматом .deb с репизитория
2. Запустить ubuntu-20.04 в виртуальной машине, если вы работаете не на линуксе
3. Переместиться в папку где лежит скачанный проект
4. Выполнить следующую команду

   `sudo apt update && sudo apt install ./alloc-0.0.{Номер билда}-Linux.deb`

5. После установки путь к установленному проекту будет добавлен PATH, поэтому остается ввести в консоле имя проекта
6. Запуск программы

   `yourname@yourname-VirtualBox:~$ alloc`
